<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <title>Star Resonance - Datos de Combate Hist√≥ricos</title>
        <script src="echarts.min.js"></script>
        <link rel="stylesheet" type="text/css" href="css/style.css" />
    </head>

    <body>
        <!-- Ventana modal de estad√≠sticas de habilidades -->
        <div id="skillModal" class="skill-modal">
            <div class="skill-modal-content" style="max-width: 70vw; max-height: 95vh; margin: 2% auto">
                <div class="skill-modal-header" style="padding: 0px 25px">
                    <h2 class="skill-modal-title">
                        <i class="icon">üìä</i>
                        <span id="skillUserName">Estad√≠sticas de Participaci√≥n de Habilidades</span>
                    </h2>
                    <span class="skill-modal-close" onclick="closeSkillModal()">&times;</span>
                </div>
                <div class="skill-modal-body" style="max-height: calc(95vh - 110px)">
                    <div class="skill-user-info">
                        <div class="skill-user-info-item">
                            <div class="skill-user-info-label">ID de Usuario</div>
                            <div class="skill-user-info-value" id="skillUserId">-</div>
                        </div>
                        <div class="skill-user-info-item">
                            <div class="skill-user-info-label">Apodo del Personaje</div>
                            <div class="skill-user-info-value" id="skillUserNickname">-</div>
                        </div>
                        <div class="skill-user-info-item">
                            <div class="skill-user-info-label">Clase</div>
                            <div class="skill-user-info-value" id="skillUserProfession">-</div>
                        </div>
                        <div class="skill-user-info-item">
                            <div class="skill-user-info-label">Puntuaci√≥n de Poder</div>
                            <div class="skill-user-info-value" id="fightPoint">-</div>
                        </div>
                        <div class="skill-user-info-item">
                            <div class="skill-user-info-label">HP M√°ximo</div>
                            <div class="skill-user-info-value" id="maxHp">-</div>
                        </div>
                        <div class="skill-user-info-item">
                            <div class="skill-user-info-label">Cantidad de Habilidades</div>
                            <div class="skill-user-info-value" id="skillCount">-</div>
                        </div>
                    </div>

                    <div class="skill-stats-container">
                        <div class="skill-chart-container" id="skillDamageChart"></div>
                        <div class="skill-chart-container" id="skillCritChart"></div>
                    </div>

                    <div class="skill-table-container">
                        <table class="skill-table" id="skillTable">
                            <thead>
                                <tr>
                                    <th>Nombre de Habilidad</th>
                                    <th>Tipo</th>
                                    <th>Elemento</th>
                                    <th>Valor Total</th>
                                    <th>Usos</th>
                                    <th>Tasa de Cr√≠tico</th>
                                    <th>Tasa de Suerte</th>
                                    <th>Valor Cr√≠tico</th>
                                    <th>Valor Normal</th>
                                </tr>
                            </thead>
                            <tbody id="skillTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div>
            <label for="chooseTime" style="margin-right: 10px; font-weight: bold">Tiempo:</label>
            <select
                id="chooseTime"
                onchange="updateTimeStamp()"
                style="margin-right: 10px; padding: 8px 12px; font-size: 14px; border-radius: 5px; border: 1px solid #ddd; background-color: white"
            ></select>
            <label for="sortSelect" style="margin-right: 10px; font-weight: bold">Ordenar por:</label>
            <select
                id="sortSelect"
                onchange="updateSortMode()"
                style="padding: 8px 12px; font-size: 14px; border-radius: 5px; border: 1px solid #ddd; background-color: white"
            >
                <option value="uid">Ordenar por UID (Ascendente)</option>
                <option value="fightPoint">Ordenar por Puntuaci√≥n (Descendente)</option>
                <option value="takenDamage">Ordenar por Da√±o Recibido (Descendente)</option>
                <option value="damage">Ordenar por Da√±o Total (Descendente)</option>
                <option value="dps">Ordenar por DPS Total (Descendente)</option>
                <option value="realtimeDpsMax">Ordenar por DPS Instant√°neo M√°ximo (Descendente)</option>
                <option value="healing">Ordenar por Curaci√≥n Total (Descendente)</option>
                <option value="hps">Ordenar por HPS Total (Descendente)</option>
                <option value="realtimeHpsMax">Ordenar por HPS Instant√°neo M√°ximo (Descendente)</option>
                <option value="hp_min">Ordenar por HP Restante (Ascendente)</option>
            </select>
        </div>
        <!-- Control de visualizaci√≥n de grupo de datos -->
        <div class="data-group-controls">
            <button id="damageGroupBtn" class="data-group-button active" onclick="toggleDataGroup('damage')">‚öîÔ∏è Da√±o y DPS</button>
            <button id="healingGroupBtn" class="data-group-button" onclick="toggleDataGroup('healing')">‚ù§Ô∏è Curaci√≥n y HPS</button>
            <button id="allGroupBtn" class="data-group-button" onclick="toggleDataGroup('all')">üìä Todos los Datos</button>
            <button id="hideInactiveBtn" class="data-group-button" onclick="toggleHideInactiveUsers()">üëÄ Ocultar Inactivos</button>
            <button class="data-group-button" onclick="openColumnSettings()">‚öôÔ∏è Configuraci√≥n de Tabla</button>
            <button class="data-group-button" onclick="downloadFightLog()">üì• Descargar Registro de Combate</button>
        </div>
        <div class="table-container" style="max-height: calc(100vh - 140px)">
            <table id="damageTable">
                <thead>
                    <tr>
                        <th rowspan="2" title="Identificador √∫nico del personaje">ID de Personaje</th>
                        <th rowspan="2" title="Apodo del personaje/Apodo personalizado">Apodo del Personaje</th>
                        <th rowspan="2" title="Clase del personaje">Clase</th>
                        <th rowspan="2" title="Puntuaci√≥n del personaje">Puntuaci√≥n</th>
                        <th rowspan="2" title="HP del personaje">HP</th>
                        <th rowspan="2" title="Da√±o recibido por el personaje en combate">Da√±o Recibido</th>
                        <th rowspan="2" title="N√∫mero de muertes del personaje en combate">Muertes</th>
                        <th rowspan="2" title="Proporci√≥n de golpes cr√≠ticos del personaje en combate respecto al total de golpes">
                            Tasa de Cr√≠tico
                        </th>
                        <th rowspan="2" title="Proporci√≥n de golpes de suerte del personaje en combate respecto al total de golpes">
                            Tasa de Suerte
                        </th>
                        <th class="damage-main-col" colspan="4">Da√±o</th>
                        <th class="damage-simple-col" style="display: none" colspan="1">Da√±o</th>
                        <th class="dps-col" colspan="3">DPS</th>
                        <th class="healing-main-col" colspan="4">Curaci√≥n</th>
                        <th class="healing-simple-col" style="display: none" colspan="1">Curaci√≥n</th>
                        <th class="hps-col" colspan="3">HPS</th>
                        <th rowspan="2">Acciones</th>
                    </tr>
                    <tr>
                        <th class="damage-cols" title="Da√±o total infligido por el personaje en combate">Da√±o Total</th>
                        <th class="damage-detail-cols" title="Da√±o cr√≠tico no afortunado infligido por el personaje en combate">Cr√≠tico Puro</th>
                        <th class="damage-detail-cols" title="Da√±o afortunado no cr√≠tico infligido por el personaje en combate">Suerte Pura</th>
                        <th class="damage-detail-cols" title="Da√±o cr√≠tico afortunado infligido por el personaje en combate">Cr√≠tico Suerte</th>
                        <th class="dps-cols" title="Da√±o infligido por el personaje en el √∫ltimo segundo de combate">DPS Instant√°neo</th>
                        <th class="dps-cols" title="DPS instant√°neo m√°ximo del personaje en combate">M√°x. Instant√°neo</th>
                        <th
                            class="dps-cols"
                            title="DPS total del personaje en combate (calculado usando el tiempo entre la primera y la √∫ltima habilidad como tiempo de combate efectivo)"
                        >
                            DPS Total
                        </th>
                        <th class="healing-cols" title="Cantidad total de curaci√≥n realizada por el personaje en combate">Curaci√≥n Total</th>
                        <th class="healing-detail-cols" title="Cantidad de curaci√≥n cr√≠tica no afortunada realizada por el personaje en combate">
                            Cr√≠tico Puro
                        </th>
                        <th class="healing-detail-cols" title="Cantidad de curaci√≥n afortunada no cr√≠tica realizada por el personaje en combate">
                            Suerte Pura
                        </th>
                        <th class="healing-detail-cols" title="Cantidad de curaci√≥n cr√≠tica afortunada realizada por el personaje en combate">
                            Cr√≠tico Suerte
                        </th>
                        <th class="hps-cols" title="Cantidad de da√±o y curaci√≥n realizada por el personaje en el √∫ltimo segundo de combate">
                            HPS Instant√°neo
                        </th>
                        <th class="hps-cols" title="HPS instant√°neo m√°ximo del personaje en combate">M√°x. Instant√°neo</th>
                        <th
                            class="hps-cols"
                            title="HPS total del personaje en combate (calculado usando el tiempo entre la primera y la √∫ltima habilidad como tiempo de combate efectivo)"
                        >
                            HPS Total
                        </th>
                    </tr>
                </thead>
                <div class="no-data">üïó Por favor, seleccione la hora correcta para obtener los datos</div>
                <tbody></tbody>
            </table>
        </div>

        <script src="./js/history.js"></script>

        <!-- ÂàóËÆæÁΩÆÂºπÁ™ó -->
        <div id="columnSettingsModal" class="column-settings-modal">
            <div class="column-settings-content">
                <div class="column-settings-header">
                    <div class="column-settings-title">‚öôÔ∏è Configuraci√≥n de Tabla</div>
                    <button class="close-btn" onclick="closeColumnSettings()">&times;</button>
                </div>

                <!-- ÂÜÖÂÆπÂ∞ÜÈÄöËøá JavaScript Âä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
    </body>
</html>
